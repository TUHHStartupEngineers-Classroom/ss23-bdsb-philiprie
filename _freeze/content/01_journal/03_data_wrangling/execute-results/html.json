{
  "hash": "f685a723b302b60667a3acaae4ed6e80",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Philip C. Riege\"\n---\n\n\n# Challenge 3\nThe aim of this challenge was to further improve the ability of data wrangling. For this data by the USPTO was used. I decided to use the reduced dataset, since the computational capabilities of the laptop I am working on are limited.\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_66076034e6a959c35a26807757ef6e24'}\n\n```{.r .cell-code}\n#import libraries----\nlibrary(tidyverse)\nlibrary(vroom)\nlibrary(data.table)\nlibrary(tidyr)\n#import reduced data set----\n\n#patent.tsv\ncol_types <- list(\n  id = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  num_claims = col_double()\n)\n\npatent_tbl <- vroom(\n  file       = \"patent.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n# assignee.tsv\n\ncol_types <- list(\n  id = col_character(),\n  type = col_number(),\n  organization = col_character()\n)\n\nassignee_tbl <- vroom(\n  file       = \"assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n# patent_assignee.tsv\n\ncol_types <- list(\n  patent_id = col_character(),\n  assignee_id = col_character()\n)\n\npatent_assignee_tbl <- vroom(\n  file       = \"patent_assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n# uspc.tsv\n\ncol_types <- list(\n  patent_id = col_character(),\n  mainclass_id = col_character(),\n  sequence = col_double()\n)\n\nuspc_tbl <- vroom(\n  file       = \"uspc.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n#patent dominance ----\n#match the assigners to their patents\npatent_assignee_joined_tbl <- patent_assignee_tbl %>% \n  left_join(assignee_tbl, by = c(\"assignee_id\" = \"id\"))\n\n#filter for US companies (type=2), group and count the number of patents and then reorganize\npatent_us_tbl <- patent_assignee_joined_tbl %>%\n  filter(type == 2) %>%\n  group_by(organization) %>%\n  summarise(count = n()) %>%\n  ungroup() %>%\n  arrange(desc(count))\n\npatent_us_tbl %>%  head(n = 10)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"7547\"},{\"1\":\"Microsoft Corporation\",\"2\":\"3165\"},{\"1\":\"Google Inc.\",\"2\":\"2668\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"2597\"},{\"1\":\"Apple Inc.\",\"2\":\"2201\"},{\"1\":\"General Electric Company\",\"2\":\"1873\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"1638\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"1625\"},{\"1\":\"Intel Corporation\",\"2\":\"1616\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"1533\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#recent patent activity ----\n#add the date and number of claims to the tibble in order to be able to filter for August 2014\npatent_august14_tbl <- patent_assignee_joined_tbl %>% \n  left_join(patent_tbl, by = c(\"patent_id\" = \"id\"))\n\n#split the date category\npatent_august14_ymd_tbl <- patent_august14_tbl %>%\n  mutate(day  = lubridate::day(date), month = lubridate::month(date), year = lubridate::year(date))\n  \n#Somehow the method with separate() did not work\n#separate(col = date,\n#           into = c(\"year\", \"month\", \"day\"),\n#           sep = \"-\")\n\n#repeat the steps from the first task plus an additional filter for the year and month\npatent_august_tbl <- patent_august14_ymd_tbl %>%\n  filter(year == 2014) %>%\n  filter(month == 08) %>%\n  filter(type ==2) %>%\n  group_by(organization) %>%\n  summarise(count = n()) %>%\n  ungroup() %>%\n  arrange(desc(count))\n\npatent_august_tbl %>%  head(n = 10)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"718\"},{\"1\":\"Microsoft Corporation\",\"2\":\"337\"},{\"1\":\"Google Inc.\",\"2\":\"240\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"223\"},{\"1\":\"Apple Inc.\",\"2\":\"222\"},{\"1\":\"Intel Corporation\",\"2\":\"159\"},{\"1\":\"General Electric Company\",\"2\":\"148\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"146\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"140\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"138\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#innovation in tech ----\n#add uspc tibble which includes the different classes of patents\npatent_inno_tbl <- left_join(patent_assignee_joined_tbl,uspc_tbl)\n\n#find top10 worldwide (types 2 or 3)\ntop10_tbl <- patent_inno_tbl %>%\n  filter(type == 2 | type == 3) %>%\n  group_by(organization) %>%\n  summarise(count = n()) %>%\n  ungroup() %>%\n  arrange(desc(count)) %>%\n  head(n=10)\n  \n#find the 5 top main classes\ntop5_classes_tbl <- patent_inno_tbl %>%\n  filter( organization %in% top10_tbl$organization,  !is.na(mainclass_id)) %>%\n  group_by(mainclass_id) %>%\n  summarise(count_class = n()) %>%\n  ungroup() %>%\n  arrange(desc(count_class)) %>%  \n  select(mainclass_id) %>%\n  head(n = 5)\n\ntop5_classes_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"mainclass_id\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"257\"},{\"1\":\"455\"},{\"1\":\"370\"},{\"1\":\"348\"},{\"1\":\"709\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}